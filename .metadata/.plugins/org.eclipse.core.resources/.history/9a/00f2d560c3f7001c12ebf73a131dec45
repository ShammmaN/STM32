/*
 * hey.c
 *
 *  Created on: Jun 28, 2022
 *      Author: shammman
 */
#include "stm32f4xx.h"
#include "./key.h"
#include "main.h"

uint16_t Position =1;
volatile uint16_t i=80;
char text[20];
volatile static uint8_t cnt=0;
volatile static uint8_t st1=0,st2=0,st3=0;

uint8_t debouncer()
{
	if(!st1) st1=1;
	else if(!st2) st2=1;
	else if(!st3) st3=1;
	else cnt=1; st1=0; st2=0; st3=0;

return cnt;
}




void Key_Read(uint16_t GPIO_Pin)
{

	 debouncer();

	 sprintf(text, "Pozycja = %d",Position);

	switch(GPIO_Pin)
		{



		case B1_Pin :
			if(cnt)
			{
				lcd_clear();
				lcd_line_1("Lewo");
				Position = Position%10;
				lcd_line_4(text);

				break;
			}


		case B2_Pin :

			if(cnt)
						{
				lcd_clear();
				lcd_line_1("Gora");
				Position +=1;
				lcd_line_4(text);
				break;
						}

		case B3_Pin :

				lcd_clear();
				lcd_line_1("Plus");
				lcd_line_2("Wartosc i : ");
				lcd_line_4(text);
				i++;
				break;

		case B4_Pin :
			if(cnt)
						{
				lcd_clear();
				lcd_line_1("Dol");
				Position -=1;
				lcd_line_4(text);
				break;
						}

		case B5_Pin :

				lcd_clear();
				lcd_line_1("Minus");
				lcd_line_2("Wartosc i : ");
				lcd_line_4(text);

				i--;
				break;

		case B6_Pin :

				lcd_clear();
				lcd_line_1("Prawo");
				Position =Position *10;
				lcd_line_4(text);
				break;

			}



}
